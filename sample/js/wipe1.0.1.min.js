/*!Yhx-wipe 1.0.1 发布日期:2018-11-14*/
var cas=document.getElementById("cas"),context=cas.getContext("2d"),_w=cas.width,_h=cas.height,moveX=0,moveY=0,radius=20,isMouseDown=!1,device=/android|webos|iPhone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),clickEvtName=device?"touchstart":"mousedown",moveEvtName=device?"touchmove":"mousemove",endEvtName=device?"touchend":"mouseup";function drawRect(e){e.save(),e.beginPath(),e.fillStyle="#666",e.fillRect(0,0,_w,_h),e.globalCompositeOperation="destination-out"}function drawarv(e,t,o){console.log("传递的实参个数"+arguments.length),e.save(),e.beginPath(),e.arc(t,o,radius,0,2*Math.PI),e.fillStyle="red",e.fill(),e.restore()}function drawLine(e,t,o,n,i){console.log("传递的实参个数"+arguments.length),e.save(),e.lineCap="round",e.beginPath(),e.moveTo(t,o),e.lineTo(n,i),e.lineWidth=2*radius,e.stroke(),e.restore()}function drawT(e,t,o,n,i){if(3===arguments.length)e.save(),e.beginPath(),e.arc(t,o,radius,0,2*Math.PI),e.fillStyle="red",e.fill(),e.restore();else{if(5!==arguments.length)return!1;e.save(),e.lineCap="round",e.beginPath(),e.moveTo(t,o),e.lineTo(n,i),e.lineWidth=2*radius,e.stroke(),e.restore()}}function clearRect(e){e.clearRect(0,0,_w,_h)}cas.addEventListener(clickEvtName,function(e){var t=e||window.event;x1=device?t.touches[0].clientX:t.clientX,y1=device?t.touches[0].clientY:t.clientY,isMouseDown=!0,drawT(context,x1,y1)},!1),cas.addEventListener(moveEvtName,function(e){if(!isMouseDown)return!1;var t=e||window.event;t.preventDefault(),x2=device?t.touches[0].clientX:t.clientX,y2=device?t.touches[0].clientY:t.clientY,drawT(context,x1,y1,x2,y2),x1=x2,y1=y2},!1),cas.addEventListener(endEvtName,function(){var e=0,t=context.getImageData(0,0,_w,_h);console.log(t);for(var o=0;o<_h;o++)for(var n=0;n<_w;n++){var i=4*(_w*o+n)+3;0==t.data[i]&&e++}var a=e/(_w*_h)*100;console.log("占总面积"+Math.round(a)+"%"),50<a&&(clearRect(context),alert("超过了50%的面积")),isMouseDown=!1},!1),window.onload=function(){drawRect(context)};