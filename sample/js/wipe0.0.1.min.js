/*!Yhx-wipe 0.0.1 发布日期:2018-11-12*/
var canvas=document.getElementById("cas"),context=canvas.getContext("2d"),_w=canvas.width,_h=canvas.height,t=0,raduis=20,moveX=0,moveY=0,isMouseDown=!1;function drawMask(e){e.fillStyle="#666",e.fill(),e.fillRect(0,0,_w,_h),e.globalCompositeOperation="destination-out"}function drawPoint(e,t,n){e.save(),e.beginPath(),e.arc(t,n,raduis,0,2*Math.PI),e.fillStyle="rgba(255,0,0,255)",e.fill(),e.stroke()}function drawLine(e,t,n,o,a){isMouseDown&&(e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(o,a),e.lineWidth=2*raduis,e.lineCap="round",e.stroke(),e.restore())}function fn1(e){var t=e||window.event,n=t.clientX,o=t.clientY;drawLine(context,moveX,moveY,n,o),moveX=n,moveY=o}function clearRect(e){e.clearRect(0,0,_w,_h)}function getTransparencyPercent(e){for(var n=e.getImageData(0,0,_w,_h),o=0;o<n.data.length;o+=4){0==n.data[o+3]&&t++}var a=t/(_w*_h)*100;return console.log("透明点个数："+t+"个"),console.log("占总面积"+Math.ceil(a)+"%"),Math.ceil(a)}cas.addEventListener("mousedown",function(e){isMouseDown=!0;var t=e||window.event;moveX=t.clientX,moveY=t.clientY,drawPoint(context,moveX,moveY),cas.addEventListener("mousemove",fn1,!1)},!1),cas.addEventListener("mouseup",function(e){isMouseDown=!1,50<getTransparencyPercent(context)&&(alert("这是我曾血拼打下的江山，曾经追她穷如狗，现在看她嫌她丑，扔之可惜，牵之傻逼!!!"),clearRect(context))},!1),window.onload=function(){drawMask(context),drawLine(context)};